<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="styles/view.css" rel="stylesheet">

    <!-- Mapbox API -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css" rel="stylesheet">

    <!--    &lt;!&ndash; Openlayers API &ndash;&gt;-->
    <!--    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.14.1/build/ol.js"></script>-->
    <!--    <link rel="stylesheet"-->
    <!--          href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.14.1/css/ol.css">-->

    <title>全球自然灾害评估系统 - 灾害分布</title>
</head>
<body>
<div id="map"></div>
<div id="view_title">
    <span style="font-family: 'Ubuntu';color: white;font-size: 40px;font-weight: bold;">GNDAS</span>
    <span style="font-family: 'Microsoft YaHei';color: white;font-size: 30px;font-weight: bold;">灾害分布</span>
    <div id="shining_bar"></div>
    <div style="font-family: 'Ubuntu';color: #1da1f2;font-size: 11px;letter-spacing: 1px;display: block; margin-top:2%;">
        GLOBAL NATURAL DISASTER ASSESSMENT SYSTEM
    </div>
</div>
<div id="control">
    <div style="display: block; height: 100px;"></div>
    <div class="func">灾害种类</div>
    <div class="content">
        <div class="type">火&nbsp;&nbsp;山</div>
        <div class="type">地&nbsp;&nbsp;震</div>
        <div class="type">海&nbsp;&nbsp;啸</div>
    </div>
    <div class="func">更改底图</div>
    <div class="content">
        <div class="style">卫&nbsp;星</div>
        <div class="style">街&nbsp;景</div>
        <div class="style">明&nbsp;亮</div>
        <div class="style">暗&nbsp;黑</div>
    </div>
    <div class="func">数据统计</div>
    <div class="content">
    </div>
</div>
<div class="flex">
    <ul>
        <li>灾害分布</li>
        <li>风险评估</li>
        <li>用户论坛</li>
        <li>数据管理</li>
        <div class="bar"></div>
    </ul>
</div>
<div id="panel_bg1"></div>
<div id="panel_bg2"></div>
<div id="info2">
    <div class="user_date">用户MFH</div>
    <div class="info_item">系统权限</div>
    <div id="item_c1">普通用户</div>
</div>
<div id="info1">
    <div class="user_date">当前时间</div>
    <div class="info_item">当前收录</div>
    <div id="item_c2">28,653</div>
    <div class="info_item">最近灾害</div>
    <div id="item_c3">汤加 [112, 23] 火山</div>
</div>


<!-- Mapbox -->
<script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoic3Nzc3BoaW54IiwiYSI6ImNrbnZnbDR1NzAzNzMyb3Bwbng3amtnMzQifQ.E1nAH_fti0KvB2heCd-cEg';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/satellite-streets-v11', // style URL
        center: [105, 45], // starting position [lng, lat]
        zoom: 1.2, // starting zoom
    });

    // // Open Lyers
    // const layers = [
    //     new ol.layer.Tile({
    //         source: new ol.source.OSM(),
    //     }),
    //     new ol.layer.Tile({
    //         extent: [-13884991, 2870341, -7455066, 6338219],
    //         source: new ol.source.TileWMS({
    //             url: 'http://localhost:8080/geoserver/nyc/wms',
    //             params: {
    //                 'LAYERS': 'nyc:tiger_roads',
    //                 'TILED': true
    //             },
    //             serverType: 'geoserver',
    //             transition: 0,
    //         }),
    //     }),
    // ];
    //
    // const map = new ol.Map({
    //     layers: layers,
    //     target: 'map',
    //     view: new ol.View({
    //         center: [-10997148, 4569099],
    //         zoom: 4,
    //     }),
    // });

    const func = document.getElementsByClassName('func');
    const type = document.getElementsByClassName('type');
    const style = document.getElementsByClassName('style');
    const shining_bar = document.getElementById('shining_bar');
    const flex = document.getElementsByClassName('flex')[0];
    const bar = document.getElementsByClassName('bar')[0];
    const info_item = document.getElementsByClassName('info_item');
    const item_c1 = document.getElementById('item_c1');
    const item_c2 = document.getElementById('item_c2');
    const item_c3 = document.getElementById('item_c3');
    const user = document.getElementsByClassName('user_date')[0];
    const time = document.getElementsByClassName("user_date")[1];

    for (let i = 0; i < func.length; i++) {
        func[i].classList.add('show');
    }

    let types = [false, false, false]
    for (let i = 0; i < type.length; i++) {
        type[i].classList.add('show');
        type[i].onclick = function () {
            if (types[i] === false) {
                type[i].classList.add('clicked');
                types[i] = true;
            } else {
                type[i].classList.remove('clicked');
                types[i] = false;
            }
        }
    }

    let styles = ['satellite-streets-v11', 'streets-v11', 'light-v10', 'dark-v10']
    let styles_c = [true, false, false, false]
    style[0].classList.add('clicked');
    for (let i = 0; i < style.length; i++) {
        style[i].classList.add('show');
        style[i].onclick = function () {
            if (styles_c[i] === false) {
                let c_id = styles_c.indexOf(true);
                style[c_id].classList.remove('clicked');
                styles_c[c_id] = false;
                style[i].classList.add('clicked');
                styles_c[i] = true;
                map.setStyle('mapbox://styles/mapbox/' + styles[i])
            }
        }
    }

    for (let i = 0; i < info_item.length; i++) {
        info_item[i].classList.add('show');
    }

    shining_bar.classList.add('show');
    flex.classList.add('show');
    bar.classList.add('show1');
    user.classList.add('show1');
    item_c1.classList.add('show');
    item_c2.classList.add('show');
    item_c3.classList.add('show');
    time.classList.add('show2');

    function getDate() {
        let date = new Date();
        time.innerHTML = date.toLocaleString();
    }

    getDate()
    setInterval("getDate()", 1000);

    const li = document.getElementsByTagName('li');
    li[1].onclick = function () {
        window.location.href = "risk.html";
    }
    li[2].onclick = function () {
        window.location.href = "discussion.html";
    }
    li[3].onclick = function () {
        window.location.href = "data.html";
    }
</script>
</body>
</html>